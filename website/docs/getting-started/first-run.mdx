---
title: Lancer le Pipeline
sidebar_position: 2
---

<!-- Complet for v1.0.0 release -->

import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'
import { faDownload, faCogs, faPoll, faSpinner, faTrophy, faBookOpen } from '@fortawesome/free-solid-svg-icons'
import Admonition from '@theme/Admonition';
import useBaseUrl from '@docusaurus/useBaseUrl';

# <FontAwesomeIcon icon={faSpinner} /> Premier Lancement : De A √† Z

Maintenant que votre environnement est configur√©, nous allons lancer le pipeline complet via le notebook principal `00_master_pipeline.ipynb`.
Ce notebook orchestre toutes les √©tapes, de la s√©lection des donn√©es √† la g√©n√©ration d‚Äôun rapport de session.

<Admonition type="info" title="Utilisateurs de Codespaces">
  <p>
    Si vous utilisez un Codespace, l‚Äôenvironnement est d√©j√† pr√™t.
    Ouvrez <code>notebooks/</code> et lancez <code>00_master_pipeline.ipynb</code>.
    Un petit jeu de donn√©es de d√©monstration peut d√©j√† √™tre pr√©sent selon la configuration du Codespace.
  </p>
</Admonition>

<Admonition type="tip" title="Checklist (30 secondes)">
  <ul>
    <li>Vous ex√©cutez bien dans le kernel <b>AstroSpectro (Py3.11)</b> (ou √©quivalent).</li>
    <li>Votre fichier <code>.env</code> est configur√© si vous utilisez des acc√®s (voir **[Connexion Gaia](/docs/user-guides/connexion-gaia)**).</li>
    <li>En local : <code>data/raw/</code> contient des spectres (sinon faites l‚Äô√©tape 1).</li>
  </ul>
</Admonition>

## <FontAwesomeIcon icon={faDownload} /> √âtape 1 : Acqu√©rir des Donn√©es (si n√©cessaire)

Si c‚Äôest votre toute premi√®re ex√©cution en local, le dossier `data/raw/` est vide :

1. Ouvrez le notebook `notebooks/01_download_spectra.ipynb`.
2. Utilisez l'interface ci-dessous pour lancer le t√©l√©chargement. Pour un test rapide, s√©lectionnez environ 1000 spectres.

<div style={{textAlign: 'center', margin: '2rem 0'}}>
  <img
    src={useBaseUrl('/img/getting-started/01_download_spectra.png')}
    alt="Figure 1 : L'interface interactive pour configurer et lancer l'acquisition des donn√©es."
    style={{maxWidth: '900px', borderRadius: '12px'}}
  />
  <p style={{opacity: 0.8, marginTop: '0.5rem'}}>
    <small>Figure 1 : L'interface interactive pour configurer et lancer l'acquisition des donn√©es.</small>
  </p>
</div>

> Besoin des options avanc√©es (workers/scrapes/tqdm/auto-throttle/validation FITS/dry-run) ?
> Elles sont document√©es dans **[Guides d‚Äôutilisation ‚Üí T√©l√©chargement](/docs/user-guides/downloading-data)**.

## <FontAwesomeIcon icon={faCogs} /> √âtape 2 : Lancer la pipeline compl√®te

Une fois que vous avez des donn√©es :

1. Ouvrez le notebook principal : `notebooks/00_master_pipeline.ipynb`.
2. **Ex√©cutez toutes les cellules de haut en bas.**

<div style={{textAlign: 'center', margin: '2rem 0'}}>
  <img
    src={useBaseUrl('/img/getting-started/master.png')}
    alt="Figure 2 : L'orchestrateur principal (00_master_pipeline) pr√™t √† l'emploi."
    style={{maxWidth: '900px', borderRadius: '12px'}}
  />
  <p style={{opacity: 0.8, marginTop: '0.5rem'}}>
    <small>Figure 2 : L'orchestrateur principal (`00_master_pipeline`) pr√™t √† l'emploi.</small>
  </p>
</div>

Le notebook ex√©cute s√©quentiellement le `MasterPipeline` :

- **Initialise l'environnement**, l'acc√®s √† **Gaia**, ainsi que cr√©e ou valide l'arborescence des r√©pertoires n√©cessaires. (la premi√®re connection peut prendre quelques temps)
- **S√©lection d‚Äôun lot :** D√©finissez simplement le nombre de spectres souhait√© (ex: `batch_size=1000`) et conservez la strat√©gie par d√©faut (`random`).
- **G√©n√©ration d‚Äôun catalogue local** pour ce lot.
- **Traitement & Extraction des features** (plusieurs dizaines de features possibles selon la config).
- **Entra√Ænement & √âvaluation** via une interface interactive.

### Entra√Ænement (premier run recommand√©)
Dans l‚Äôinterface d‚Äôentra√Ænement, vous pouvez choisir plusieurs mod√®les (ex. `XGBoost`, `RandomForest`, `SVM`, `ExtraTrees`, `KNN`, `MLP`, etc.) et ajuster des hyperparam√®tres.

> **Objectif :** valider que la cha√Æne compl√®te fonctionne (pas optimiser la performance).

Pour une **premi√®re ex√©cution**, privil√©giez la simplicit√© :
- Pour un premier run, on recommande **XGBoost** ou **RandomForest** (rapides, robustes), puis explorer les autres mod√®les ensuite.
- Laissez les valeurs par d√©faut (ou un template/preset si disponible)
- Lancez le batch / l‚Äôex√©cution

<div style={{textAlign: 'center', margin: '2rem 0'}}>
  <img
    src={useBaseUrl('/img/getting-started/training.png')}
    alt="Figure 3 : Le panneau de contr√¥le pour choisir votre mod√®le (XGBoost/RF) sans toucher au code."
    style={{maxWidth: '900px', borderRadius: '12px'}}
  />
  <p style={{opacity: 0.8, marginTop: '0.5rem'}}>
    <small>Figure 3 : Le panneau de contr√¥le pour choisir votre mod√®le (XGBoost/RF) sans toucher au code.</small>
  </p>
</div>

> Toute la documentation ‚Äúpropre‚Äù sur : templates/pr√©r√©glages, recherche HP, calibration, choix du mod√®le, etc. est dans **[Guides d‚Äôutilisation ‚Üí Entra√Ænement](/docs/user-guides/model-training)**.


## <FontAwesomeIcon icon={faPoll} /> √âtape 3 : Examiner les R√©sultats

√Ä la fin de l‚Äôex√©cution, plusieurs artefacts sont produits :

- Un fichier **CSV** dans `data/processed/` (features pr√™tes pour analyse).
- Un mod√®le **`.pkl`** dans `data/models/`.
- Un **rapport de session JSON** dans `data/reports/`, ainsi que les graphiques d'analyse des r√©sultats (`feature_importance`, `roc`, `confusion_matrix`, `precision_recal`, etc).

<br />

<br />

<div className="shadow--md" style={{
  border: '1px solid var(--ifm-color-primary)', 
  borderRadius: '15px', 
  padding: '2rem',
  backgroundColor: 'var(--ifm-background-surface-color)' 
}}>

  {/* --- PARTIE HAUTE : F√âLICITATIONS --- */}
  <div style={{display: 'flex', alignItems: 'center', marginBottom: '2rem'}}>
    <div style={{marginRight: '1.5rem', color: 'var(--ifm-color-primary)'}}>
      {/* Ton ic√¥ne en couleur primaire (Bleu) */}
      <FontAwesomeIcon icon={faTrophy} size="3x" />
    </div>
    <div>
      <h2 style={{margin: 0}}>F√©licitations !</h2>
      <p style={{margin: 0, fontSize: '1.1rem', opacity: 0.9}}>
        Vous avez ex√©cut√© le pipeline de bout en bout et obtenu vos premi√®res classifications. <br/>
        Vous √™tes maintenant pr√™t √† explorer le projet plus en profondeur !
      </p>
    </div>
  </div>

  {/* LIGNE DE S√âPARATION DISCR√àTE */}
  <hr style={{borderColor: 'var(--ifm-color-emphasis-200)', margin: '2rem 0'}} />

  {/* --- PARTIE BASSE : LES CARTES --- */}
  <h3 style={{textAlign: 'center', marginBottom: '1.5rem'}}>
    üß≠ Et maintenant ? Choisissez votre voie :
  </h3>

  <div className="row">
    {/* CARTE SCIENCE */}
    <div className="col col--6" style={{marginBottom: '1rem'}}>
      <div className="card shadow--lw" style={{height: '100%'}}>
        <div className="card__header">
          <h3>üî≠ Comprendre la Science</h3>
        </div>
        <div className="card__body">
          <p>D√©couvrez les concepts astrophysiques derri√®re le code : classification spectrale, normalisation des flux et √©quations.</p>
        </div>
        <div className="card__footer">
          <a href="../science" className="button button--primary button--block">
            Explorer le Contexte ‚Üí
          </a>
        </div>
      </div>
    </div>

    {/* CARTE EXPERT */}
    <div className="col col--6" style={{marginBottom: '1rem'}}>
      <div className="card shadow--lw" style={{height: '100%'}}>
        <div className="card__header">
          <h3>‚ö° Devenir un Expert</h3>
        </div>
        <div className="card__body">
          <p>Apprenez √† configurer les <em>workers</em>, optimiser le t√©l√©chargement et cr√©er vos propres presets d'entra√Ænement.</p>
        </div>
        <div className="card__footer">
          <a href="../user-guides/downloading-data" className="button button--primary button--block">
            Consulter les Guides ‚Üí
          </a>
        </div>
      </div>
    </div>
  </div>

</div>