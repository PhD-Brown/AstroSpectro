---
title: "Refactorisation des notebooks"
slug: refonte-visualisation-astrospectro
authors: abaker
tags: ["refactoring", "visualisation", "ipywidgets", "architecture", "milestone"]
date: 2025-07-23
---

> <span style={{fontSize: "1.3rem", fontWeight: "400", color: "#AAA"}}>Vers une Suite Scientifique Modulaire pour AstroSpectro</span>


Depuis le dÃ©but du projet **AstroSpectro**, le notebook `02_tools_and_visuals.ipynb` servait de bloc-notes exploratoire. On y testait des visualisations de spectres, des dÃ©tections de raies, des diagnostics. Mais avec lâ€™accumulation des outils, le code devenait monolithique et difficile Ã  maintenir.

<!--truncate-->

## Objectifs du refactoring

Jâ€™ai entrepris une refonte complÃ¨te avec trois objectifs en tÃªte :
- **ClartÃ©** : chaque outil doit Ãªtre lisible, autonome, bien nommÃ©
- **RÃ©utilisabilitÃ©** : les fonctions doivent Ãªtre modulaires et utilisables ailleurs
- **ExplorabilitÃ©** : lâ€™interactivitÃ© doit rendre lâ€™exploration plus intuitive et scientifique

## Architecture finale

Toute la logique est maintenant dans `src/tools/visualizer.py`, sous forme dâ€™une classe :

```python
visualizer = AstroVisualizer(paths)
```

Chaque outil interactif (explorateur de headers, spectre augmentÃ©, tuning des pics, carte du ciel, inspecteur de modÃ¨les) devient un simple appel :

```python
visualizer.interactive_spectrum_analyzer()
visualizer.plot_sky_coverage()
```

## Nouveaux outils intÃ©grÃ©s

- Explorateur de Header FITS dynamique
- Analyseur de Spectre AugmentÃ© (flux + raies + SNR + sliders)
- Tuning interactif des paramÃ¨tres de dÃ©tection (`prominence`, `fenÃªtre`)
- Analyse des zÃ©ros dans les features extraites
- Carte de couverture cÃ©leste (projection Mollweide)
- Inspecteur de modÃ¨les `.pkl` : hyperparamÃ¨tres + importance des features

## Avant / AprÃ¨s

**Par exemple le code pour l'affichage des features nul**

**Avant** :
- 500 lignes de notebook exploratoire
- Code spaghetti difficile Ã  relire

![image info](/img/avant.png)

**AprÃ¨s** :
- Un notebook tableau de bord 
- Chaque outil dans sa cellule, un appel par outil
- Une classe modulaire importable ailleurs

![image info](/img/apres.png)


## Impact sur le projet

Cette refonte me permet de :
- Gagner du temps pour itÃ©rer sur les features et les modÃ¨les
- Travailler comme dans un vrai labo
- PrÃ©parer lâ€™extension du pipeline Ã  des spectres cubes (SITELLE, etc.)

> Et surtoutâ€¦ continuer Ã  mâ€™amuser. Jâ€™ai dÃ©jÃ  passÃ© plus de **200h** sur AstroSpectro cet Ã©tÃ© â€” et je ne vois toujours pas le temps passer !

## Prochaine Ã©tape

- Ajouter des comparateurs de spectres
- Exporter les analyses (PNG + PDF)
- GÃ©nÃ©rer automatiquement un mini rapport exploratoire
- Tout ce qui se trouve dans la [Roadmap](https://phd-brown.github.io/AstroSpectro/docs/community/roadmap)

> *"Je rÃ©alise aujourdâ€™hui Ã  quel point explorer devient plaisant quand le code disparaÃ®t derriÃ¨re lâ€™outil."*

Merci Ã  ceux qui suivent lâ€™aventure AstroSpectro ğŸš€
